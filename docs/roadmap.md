# Дорожная карта

- Команды
    - [x] Создание задачи из командной строки
        - Параметры
            - [x] summary
            - [ ] description
                - [ ] Многострочный
            - [x] assignee
                - [x] автодополнение
                - [ ] "Назначить на меня"
            - [x] Проект
                - [x] Автодополнение
                - [x] Дефолтный из настроек
            - [x] Тип задачи
                - [x] Автодополнение
            - [ ] Спринт
                - [ ] Автодополнение
                - [ ] Активный спринт
                - [ ] Дефолтный из настроек
    - [x] Поиск пользователей (для поля assignee)
    - [x] Просмотра всех полей задачи (например, для поиска спринта вручную)
    - [ ] Команда извлечения готового шаблона из задачи
    - [ ] Поиск спринтов
    - [ ] Пакетное создание задач из данных в yaml
    - [ ] Редактирование выходного файла с последующей синхронизацией с Jira
    - [ ] Команда login
    - Конфигурация `jtl config`
        - [ ] Проверять подключение к серверу перед сохранением конфига
        - [x] config init
        - [x] config set
        - [ ] config list|show
        - [x] `--global/--local`
    - [ ] Команда настройки автодополнения
    - [ ] Команда поиска поля спринта
- Шаблонизация задач
    - [x] Простая шаблонизация через YAML
    - [x] YAML-структуры соответствуют JSON структурам Jira REST API
    - [x] Создание вложенных наборов задач
    - [x] Наследование полей родительской задачи
    - [ ] Шаблонизирование строковых полей строками родительской задачи
    - [ ] Автоматическая подстановка связей с родительской задачей
    - [ ] Автоматическая подстановка связей между вложенными задачами
          (порядок выполнения)
    - [ ] Возможность указания связи через временные идентификаторы задач
    - [ ] Шаблонизирование строковых полей по переменным
    - [ ] Поле prefix для summary задачи
    - [ ] Cоздание задач из csv, шаблонизированных через YAML
    - [x] Заполнение пропущенных параметров из шаблонов
- Вспомогательные функции
    - [x] prompt для обязательных опций
    - [ ] Корректный рендеринг ошибок
    - [ ] Предварительная проверка валидности указанных полей (существование в Jira)
    - [ ] Подсказки вариантов для невалидных полей
    - [ ] Откат операции при возникновении ошибки (невозможно без административных прав)
    - [ ] Вывод подтверждения со списком действий перед выполнением команды
    - [x] Конфигурационные файлы
        - [x] Поддержка .ini
        - [x] Конфиги
            - [x] Локальный
            - [x] Пользовательский
            - [x] Из параметров CLI
        - [x] Настройки
            - [x] Данные для подключения к серверу (конфиги->параметры)
            - [x] Файл шаблона (конфиги->параметры)
            - [ ] Проект по умолчанию (конфиги->шаблон->параметры)
            - [ ] Спринт по умолчанию
        - [x] Подгрузка пропущенных параметров CLI из конфигов
    - [ ] Поддержка сохранения авторизации в файлах cookie
    - [ ] Логирование
        - [ ] Совершенных действий
        - [ ] Всех осуществленных запросов к Jira
    - [ ] Автодополнение в командной строке
        - [x] Субкомманд
        - [ ] Параметров (issuetype, sprint, assignee, project, etc)
            - [ ] Кеширование
    - [ ] Опция `--dry-run`
- [ ] Идеи
    - [ ] Дополнительное предупреждение о хранении пароля в открытом виде
    - [ ] Автоматическое определение customfields
    - [ ] Написать простой туториал с реальными юзкейсами использования
    - [ ] Фильтры или Jinja-шаблоны для get-issue
    - [ ] Псевдонимы для customfield на уровне кода. В конфиг - слишком сложно,
          т.к. поля могут быть разных типов и с ними связана логика
          автодополнения, выбора дефолтного.
        - [ ] sprint
            - [ ] Дефолтный из конфига (в конфиге [...defaults].sprint = 55)
            - [ ] В шаблоне, как $sprint / jtl_sprint / jtl.sprint / {jtl.sprint}
            - [ ] Опция командной строки --sprint
                - [ ] Автодополнение
                - [ ] Алиас --sprint active (или current). Помнить о параллельных спринтах!
        - [ ] component
        - [ ] team
    - [ ] Плагин (!) логирование времени, как в another-jira-cli.
    - [ ] Команда для JQL с автодополнением
    - [ ] Поддержка нескольких окружений Jira в конфиге вместо модели
          инстанс = директория
    - [ ] Поддержка нескольких инстансов Jira с помощью директорий
          .jtl/
            global.cfg (instances)
            envs/
              template.yaml
              jira.cfg
    - [ ] Группа команд для управления окружениями Jira: jtl jira list|use|add
    - [ ] Перенести общие опции CLI к основной команде?
    - [ ] Опция открытия созданных задач в браузере (с настройкой) с использов
          ванием webbrowser
    - [ ] Убрать логику подстановки префикса `jtl.` в секции конфигов
    - [ ] Убрать сокращенный вариант опций конфигурационных параметров
    - [ ] Добавить в команду create-issue параметр для создания сабтасок с
      префиксами для summary оригинальной задачи
    - [ ] Убрать из issue_set.yaml поле шаблона и использовать общий шаблон из
      create-issue
    - [ ] Полную форму параметры приблизить к REST API (
      `project -> project.name`, `type -> issuetype.name`,
      `assignee -> assignee.name`)
    - [ ] Получения задачи в формате `PROJ-111 Summary of Issue`
    - [ ] Добавление подписи об автоматическом создании задачи в description
    - [ ] Подгрузка шаблонов задач из Jira, как в плагине Issue Templates for Jira
    - [ ] Система плагинов (например, для расширения приложения командой
      заведения бага с шагами воспроизведения, ОР, ФР)
    - [ ] Защита от повторного создания задач (с выводом подтверждения)
    - [ ] Разобраться с тем, как добавлять многострочный description
    - [ ] Переименовать template -> prototype (proto)
    - [ ] Опция `--filter` для `get-issue` для поиска по имени ветки, т.к.
      grep в mintty не работает с юникодом.
- [ ] Технический долг
    - [ ] Устранить шаблонизацию обязательных полей, если они и так были
          проставлены через fallback или сделать поля необязательными, чтобы
          они один раз проставлялись через шаблонизацию.
    - [ ] Сделать простую обработку ошибок, как в another-jira-cli
    - [ ] Вынести все параметры опций в dict
    - [ ] Отрефакторить пакет cli - пенести команды в соответствующие пакеты
      `commands.<entity>.<concrete_command>`, опции в `options`
    - [x] Отрефакторить извлечение опции из конфига. Есть более удачный способ
      с подменой `cls=CustomOption`, использованный в извлечении параметра из
      шаблона. Используемый сейчас `callback=` задумывался для другого -
      для окончательной обработки значения перед передачей в команду. Также,
      это позволит избавиться от кастомного флага `required=`. Кроме того,
      неизвестно, какие проблемы еще несет текущая реализация. Осталось
      придумать, что делать с логикой, которая рендерит другое сообщение об
      ошибке, если параметр был взят из конфига.
    - [x] Не выводить [required] для FallbackOption
    - [ ] Заменить повсеместное использование `callback=` на `type=`. Сейчас
      все `callback=` делают именно то, что должен делать `type=`.
    - [ ] Магия `@add_jira_options` и `@add_config_option`/`@remove_config_option`
      не применяется для `ctx.params` в аргументах функции обратного вызова
      `autocompletion=`. Понять, почему и придумать, как исправить.
    - [x] Разделить `jira-auth` на `login` и `password`
    - [x] Сделать `password` вводимым из prompt
